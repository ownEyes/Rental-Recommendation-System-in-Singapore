<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/4.3.1/css/bootstrap.min.css">
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css">
        <link href="../static/plugin/ratingstar/css/star-rating.css" media="all" rel="stylesheet" type="text/css"/>
        <link href="../static/plugin/ratingstar/themes/krajee-fas/theme.css" media="all" rel="stylesheet" type="text/css"/>
        <link href="../static/plugin/ratingstar/themes/krajee-svg/theme.css" media="all" rel="stylesheet" type="text/css"/>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/css/bootstrap-datepicker.min.css">
        <!--script src="https://cdn.staticfile.org/jquery/3.2.1/jquery.min.js"></script-->
        <script src="https://cdn.staticfile.org/jquery/3.2.1/jquery.min.js"></script>
        <script src="../static/plugin/ratingstar/js/star-rating.js" type="text/javascript"></script>
        <script src="../static/plugin/ratingstar/themes/krajee-fas/theme.js" type="text/javascript"></script>
        <script src="../static/plugin/ratingstar/themes/krajee-svg/theme.js" type="text/javascript"></script>
        <script src="https://cdn.staticfile.org/popper.js/1.15.0/umd/popper.min.js"></script>
        <script src="https://cdn.staticfile.org/twitter-bootstrap/4.3.1/js/bootstrap.min.js"></script>
        <link rel="icon" type="image/x-icon" href="../static/img/favicon.ico" />
        <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js"></script>
        <!-- Bootstrap Icons-->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css" rel="stylesheet" />
        <!-- Google fonts-->
        <!-- Core theme CSS (includes Bootstrap)-->
        <link href="../static/css/styles.css" rel="stylesheet" />
        <style>
            .user-input-bar {
               width: 50%; /* 定义宽度，根据需要调整 */
               margin: 0 auto; /* 水平居中 */
               background-color: #f0f0f0; /* 背景颜色 */
               border: 1px solid #ccc; /* 边框 */
               padding: 10px; /* 内边距 */
               display: flex; /* 使用 Flex 布局 */
               justify-content: center; /* 居中对齐条目 */
               align-items: center; /* 垂直居中对齐条目 */
            }
            .wide-input {
                width: 110px;
            }
           </style>
           <title>Easing Your Rental Journey</title>
           <link rel="icon" type="image/x-icon" href="../static/img/favicon.ico" />
    </head>
    <body>
        <div id="mainNav"></div>
        <section class="page-section" id="contact">
            <!--div class="container px-4 px-lg-5"-->
            <div class="container">
                <div class="row justify-content-center">
                    <div class="text-center">
                        <h2 class="mt-0">Renting Made Easy, Just for You.</h2>
                        <hr class="divider" />
                        <p class="text-muted mb-5">Please enter your requirements and preferences below.</p>
                    </div>
                </div>
                <div>
                    <form id="userin" method="post" action="">
                        {{ form.csrf_token }}
                        <div class="form-group row align-items-center justify-content-center">
                            <div class ="col-1">
                                <label for="minmonth" class="col-form-label text-right">Min. Month:</label>
                            </div>
                            <div class="col-1">
                                <input type="text" name ="minmonth" class="form-control" id="minmonth">
                                    <!--span class="input-group-text">----</span-->
                            </div>
                            <div class ="col-1">
                                <label for="maxmonth" class="col-form-label text-right">Max. Month:</label>
                            </div>
                            <div class="col-1">
                                <input type="text" name ="maxmonth" class="form-control" id="maxmonth">
                                    <!--span class="input-group-text">----</span-->
                            </div>
                        </div>
                        <div class="form-group row align-items-center justify-content-center">
                            <div class ="col-1">
                                <label for="region" class="col-2 col-form-label text-right">Region:</label>
                            </div>
                            <div class="col-3">
                                <select name="region" class="form-control" id="region"> 
                                     <option value="" disabled selected></option>  
                                     <option value="East Region">East Region</option>
                                     <option value="Central Region">Central Region</option>
                                     <option value="North Region">North Region</option>
                                     <option value="North-East Region">North-East Region</option>
                                     <option value="West Region">West Region</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group row align-items-center justify-content-center">
                            <div class ="col-1">
                                <label for="postcode" class="col-2 col-form-label text-right">Postcode:</label>
                            </div>
                            <div class="col-3">
                        
                                <input type="text" name="postcode" class="form-control" id="postcode">   
                            </div>
                        </div>
                        <div class="form-group row align-items-center justify-content-center">
                            <div class ="col-1">
                                <label for="roomtype" class="col-2 col-form-label text-right">Roomtype:</label>
                            </div>
                            <div class="col-3">
                                <select name="roomtype" class="form-control" id="roomtype" > 
                                     <option value="" disabled selected></option>  
                                     <option value="EntireHome/apt">Entire home/apt(Retype min&max price in<br>the form of a block lease)</option>
                                     <option value="HotelRoom">Hotel room</option>
                                     <option value="PrivateRoom">Private room</option>
                                     <option value="SharedRoom">Shared room</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group row align-items-center justify-content-center">
                            <div class ="col-1">
                                <label for="numbedrooms" class="col-form-label text-right">Num. Bedrooms:</label>
                            </div>
                            <div class="col-1">
                                <input type="text" name ="numbedrooms" class="form-control" id="numbedrooms">
                                    <!--span class="input-group-text">----</span-->
                            </div>
                            <div class ="col-1">
                                <label for="numbeds" class="col-form-label text-right">Num. Beds:</label>
                            </div>
                            <div class="col-1">
                                <input type="text" name ="numbeds" class="form-control" id="numbeds">
                                    <!--span class="input-group-text">----</span-->
                            </div>
                        </div>
                        <div class="form-group row align-items-center justify-content-center">
                            <div class ="col-1">
                                <label for="numbathrooms" class="col-form-label text-right">Num. Bathrooms:</label>
                            </div>
                            <div class="col-1">
                                <input type="text" name ="numbathrooms" class="form-control" id="numbathrooms">
                                    <!--span class="input-group-text">----</span-->
                            </div>
                            <div class ="col-1">
                                <label for="bathroomtype" class="col-form-label text-right">Type Bathroom:</label>
                            </div>
                            <div class="col-1">
                                <select name="bathroomtype" class="form-control" id="bathroomtype" > 
                                     <option value="" disabled selected></option>  
                                     <option value="Private">Private</option>
                                     <option value="Shared">Shared</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group row align-items-center justify-content-center">
                            <div class ="col-1">
                                <label for="accommodates" class="col-2 col-form-label text-right">Num. Hosts:</label>
                            </div>
                            <div class="col-3">
                        
                                <input type="text" name="accommodates" class="form-control" id="accommodates">   
                            </div>
                        </div>
                        <div class="container mt-5">
                            <div class="text-center">
                                <div class="dropdown">
                                    <a href="#" class="list-group-item list-group-item-action list-group-item-primary w-50 mx-auto" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                        Amenities
                                    </a>
                                    <div class="dropdown-menu w-50" aria-labelledby="dropdownMenuButton">
                                        <h6 class="dropdown-header">Public facilities</h6>
                                        <div class="row">
                                            <div class="col-3">
                                                <div class="form-check ">
                                                    <input class="form-check-input" type="checkbox" id="BBQ" name="public_facilities" value="BBQ">
                                                    <label class="form-check-label" for="BBQ">BBQ</label>
                                                </div>
                                            </div>
                                            <div class="col-3">
                                                <div class="form-check">
                                                    <input class="form-check-input" type="checkbox" id="gym" name="public_facilities" value="gym">
                                                    <label class="form-check-label" for="gym">Gym</label>
                                                </div>
                                            </div>
                                            <div class="col-3">
                                                <div class="form-check">
                                                    <input class="form-check-input" type="checkbox" id="pool" name="public_facilities" value="pool">
                                                    <label class="form-check-label" for="pool">Pool</label>
                                                </div>
                                            </div>
                                            <div class="col-3">
                                                <div class="form-check">
                                                    <input class="form-check-input" type="checkbox" id="backyard" name="public_facilities" value="backyard">
                                                    <label class="form-check-label" for="backyard">Backyard</label>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="dropdown-divider"></div>
                                        <h6 class="dropdown-header">Cooking facilities</h6>
                                        <div class="row">
                                            <div class="col-2">
                                                <div class="form-check ">
                                                    <input class="form-check-input" type="checkbox" id="kitchen" name="cooking_facilities" value="kitchen">
                                                    <label class="form-check-label" for="kitchen">Kitchen</label>
                                                </div>
                                            </div>
                                            <div class="col-3">
                                                <div class="form-check">
                                                    <input class="form-check-input" type="checkbox" id="refrigerator" name="cooking_facilities" value="refrigerator">
                                                    <label class="form-check-label" for="refrigerator">Refrigerator</label>
                                                </div>
                                            </div>
                                            <div class="col-2">
                                                <div class="form-check">
                                                    <input class="form-check-input" type="checkbox" id="microwave" name="cooking_facilities" value="microwave">
                                                    <label class="form-check-label" for="microwave">Microwave</label>
                                                </div>
                                            </div>
                                            <div class="col-2">
                                                <div class="form-check">
                                                    <input class="form-check-input" type="checkbox" id="oven" name="cooking_facilities" value="oven">
                                                    <label class="form-check-label" for="oven">Oven</label>
                                                </div>
                                            </div>
                                            <div class="col-2">
                                                <div class="form-check">
                                                    <input class="form-check-input" type="checkbox" id="stoven" name="cooking_facilities" value="stoven">
                                                    <label class="form-check-label" for="stoven">Stoven</label>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="dropdown-divider"></div>
                                        <h6 class="dropdown-header">Interior facilities</h6>
                                        <div class="row">
                                            <div class="col-2">
                                                <div class="form-check ">
                                                    <input class="form-check-input" type="checkbox" id="aircon" name="interior_facilities" value="aircon">
                                                    <label class="form-check-label" for="aircon">Aircon</label>
                                                </div>
                                            </div>
                                            <div class="col-3">
                                                <div class="form-check">
                                                    <input class="form-check-input" type="checkbox" id="dryer" name="interior_facilities" value="dryer">
                                                    <label class="form-check-label" for="dryer">Dryer</label>
                                                </div>
                                            </div>
                                            <div class="col-2">
                                                <div class="form-check">
                                                    <input class="form-check-input" type="checkbox" id="Wifi" name="interior_facilities" value="Wifi">
                                                    <label class="form-check-label" for="Wifi">Wifi</label>
                                                </div>
                                            </div>
                                            <div class="col-2">
                                                <div class="form-check">
                                                    <input class="form-check-input" type="checkbox" id="TV" name="interior_facilities" value="TV">
                                                    <label class="form-check-label" for="TV">TV</label>
                                                </div>
                                            </div>
                                            <div class="col-2">
                                                <div class="form-check">
                                                    <input class="form-check-input" type="checkbox" id="fan" name="interior_facilities" value="fan">
                                                    <label class="form-check-label" for="fan">Fan</label>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="dropdown-divider"></div>
                                        <h6 class="dropdown-header">Other needs</h6>
                                        <div class="row">
                                            <div class="col-3">
                                                <div class="form-check ">
                                                    <input class="form-check-input" type="checkbox" id="pets" name="other_needs" value="pets">
                                                    <label class="form-check-label" for="pets">Pets</label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="mb-100" style="background-color: white;">
                                    <div class="row mb-4">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="mb-100" style="background-color: white;">
                            <div class="row mb-4">
                            </div>
                        </div>
                        <div class="text-center"> 
                            <button type="submit" class="btn btn-primary"  id="SubmitButton">Submit</button>
                        </div>
                    </form>
                </div>
            </div>
        </section>
        <script>
            document.addEventListener('DOMContentLoaded', function() {
            fetch('/nav')
            .then(response => response.text())
            .then(data => {
            document.getElementById("mainNav").innerHTML = data;
              });
                }
            );
            jQuery(document).ready(function(){ 
                function handleFormSubmission(formData) {
                    var minmonth = parseInt(document.getElementById("minmonth").value, 10);
                    var maxmonth = parseInt(document.getElementById("maxmonth").value, 10);
                    var postcode = document.getElementById("postcode").value;
                    var roomtype = document.getElementById("roomtype").value;
                    var num_bedrooms = document.getElementById("numbedrooms").value;
                    var num_beds = document.getElementById("numbeds").value;
                    var num_bathrooms = document.getElementById("numbathrooms").value;
                    var type_bathrooms = document.getElementById("bathroomtype" ).value;
                    var accommodates = document.getElementById("accommodates").value;
                    // var BBQ=document.getElementById("BBQ").value;
                    // var gym=document.getElementById("gym").value;
                    // var pool=document.getElementById("pool").value;
                    // var backyard=document.getElementById("backyard").value;
                    // var kitchen=document.getElementById("kitchen").value;
                    // var refrigerator=document.getElementById("refrigerator").value;
                    // var microwave=document.getElementById("microwave").value;
                    // var oven=document.getElementById("oven").value;
                    // var stoven=document.getElementById("stoven").value;
                    // var aircon=document.getElementById("aircon").value;
                    // var dryer=document.getElementById("dryer").value;
                    // var Wifi=document.getElementById("Wifi").value;
                    // var TV=document.getElementById("TV").value;
                    // var fan=document.getElementById("fan").value;
                    // var pets=document.getElementById("pets").value;
                    var amenities = [BBQ, gym, pool, backyard, kitchen, refrigerator, microwave, oven, stoven, aircon, dryer, Wifi, TV, fan, pets];
                    var isAmenitySelected = amenities.some(amenity => amenity !== ''); // 检查至少一个复选框是否被选中

                    if (minmonth === "" || maxmonth === "" || postcode === "" || region === ""|| roomtype === "" || num_bedrooms === "" || num_beds==="" || num_bathrooms === "" || type_bathrooms === "" ||accommodates === "") {
                        alert("Please finish all the blanks!");
                    }
                    else if(minmonth > maxmonth){
                        alert("Please type in correct time range!");
                    }
                    else if(!isAmenitySelected){
                        alert('Please select at least one amenity you have!');
                    }
                    else if(minmonth < 3){
                        alert("The residence should last at least 3 months!");
                        
                    }    // 验证输入是否满足条件
                    else {
                            // 如果验证通过，执行 AJAX 请求
                        $.ajax({
                            url: '/submit_data',
                            type: 'POST',
                            data: formData,
                            success: function(response) {
                                window.location.href = '/priadv';
                            },
                            error: function(error) {
                                    // 处理请求错误
                            }
                        });
                    } 
                }
                
                $("#userin").submit(function(e) {
                    e.preventDefault();
                    var formData = $(this).serialize();

                    //formData += "&daydifference=" + dayDifference
                    handleFormSubmission(formData);
                    //console.log("Serialized Data: ",formData);
                });
                
        });
          </script>
          <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
          <!-- SimpleLightbox plugin JS-->
          <script src="https://cdnjs.cloudflare.com/ajax/libs/SimpleLightbox/2.1.0/simpleLightbox.min.js"></script>
          <!-- Core theme JS-->
          <script src="../static/js/scripts.js"></script>
          <!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *-->
          <!-- * *                               SB Forms JS                               * *-->
          <!-- * * Activate your form at https://startbootstrap.com/solution/contact-forms * *-->
          <!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *-->
    </body>
</html>